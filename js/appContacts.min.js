(()=>{"use strict";!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),(()=>{const e=document.querySelector(".header"),t=e.querySelector(".header__navbar"),l=()=>{window.scrollY<t.clientHeight?(t.style.top="1rem",t.style.opacity=1,t.style.position="absolute",t.style.background="transparent",t.style.transform="translateY(0)"):window.scrollY>t.clientHeight&&window.scrollY<t.clientHeight+100?(t.style.top=0,t.style.opacity=0,t.style.transform="translateY(-100%)"):window.scrollY>t.clientHeight+100&&window.scrollY<t.clientHeight+200?(t.style.top=0,t.style.position="fixed",t.style.transform="translateY(-100%)"):window.scrollY>t.clientHeight+200&&window.scrollY<e.clientHeight?(t.style.opacity=1,t.style.top=0,t.style.position="fixed",t.style.transform="translateY(-100%)"):window.scrollY>e.clientHeight&&(t.style.top=0,t.style.position="fixed",t.style.transform="translateY(0)",t.style.background="#353743")};window.addEventListener("scroll",l),l()})(),(()=>{const e=document.querySelectorAll("#burger"),t=document.querySelectorAll("#search"),l=document.querySelector(".header__modal"),r=()=>{l.style.transform="translateX(0)"},o=()=>{l.style.transform="translateX(100%)"};t.forEach(((e,t)=>{e.addEventListener("click",r)})),e.forEach(((e,t)=>{e.addEventListener("click",r)})),l.addEventListener("click",(e=>{e.target.closest('[href*="#"]')?o():e.target.closest("[href]")?(location.href=e.target.getAttribute("href"),o()):e.target.closest(".header__head")&&e.target.closest(".navigation")||o()}))})(),(()=>{const e=document.querySelector(".main"),t=document.querySelector(".firstModal"),l=document.querySelector(".secondModal"),r=document.querySelector(".applicants"),o=document.querySelector(".thanks"),a=document.querySelector(".design"),n=document.querySelector(".master"),s=document.querySelector(".garant"),c=document.querySelector(".prices"),i=document.querySelector(".consultate"),d=document.querySelectorAll("#applicants"),u=document.querySelectorAll("#design"),g=document.querySelectorAll("#consultate"),y=document.querySelectorAll("#order"),m=document.querySelectorAll("#prices"),f=document.querySelectorAll("#garant"),v=document.querySelectorAll(".header__button"),h=document.querySelectorAll("#master"),p=()=>{e.classList.toggle("active")},E=()=>{t.classList.toggle("active")},L=()=>{i.classList.toggle("active")},A=()=>{l.classList.toggle("active")},S=()=>{n.classList.toggle("active")},q=()=>{r.classList.toggle("active")},k=()=>{a.classList.toggle("active")},w=()=>{s.classList.toggle("active")},_=()=>{c.classList.toggle("active")};u.forEach(((e,t)=>{e.addEventListener("click",k)})),g.forEach(((e,t)=>{e.addEventListener("click",L)})),m.forEach(((e,t)=>{e.addEventListener("click",_)})),f.forEach(((e,t)=>{e.addEventListener("click",w)})),y.forEach(((e,t)=>{e.addEventListener("click",p)})),d.forEach(((e,t)=>{e.addEventListener("click",q)})),v.forEach(((e,t)=>{"on-line консультация"!=e.textContent&&e.addEventListener("click",p)})),h.forEach(((e,t)=>{e.addEventListener("click",S)})),e.addEventListener("click",(e=>{e.target.closest(".modal")?e.target.closest("#firstModal")?E():e.target.closest("#secondModal")&&A():p()})),i.addEventListener("click",(e=>{e.target.closest(".modal")||L()})),c.addEventListener("click",(e=>{e.target.closest(".modal")||_()})),n.addEventListener("click",(e=>{e.target.closest(".modal")||S()})),s.addEventListener("click",(e=>{e.target.closest(".modal")||w()})),a.addEventListener("click",(e=>{e.target.closest(".modal")||k()})),t.addEventListener("click",(e=>{e.target.closest(".modal")||E()})),r.addEventListener("click",(e=>{e.target.closest(".modal")||q()})),l.addEventListener("click",(e=>{e.target.closest(".modal")||A()})),o.addEventListener("click",(e=>{e.target.closest(".modal")||o.classList.toggle("active")}))})(),(()=>{const e=()=>{window.innerWidth<=720&&document.querySelectorAll(".navigation").forEach(((e,t)=>{const l=e.querySelectorAll(".navigation__head"),r=e.querySelectorAll(".navigation__block");l.forEach(((e,t)=>{t<3?(e.querySelector("img").style="transform: rotate(180deg)",e.addEventListener("click",(l=>{l.preventDefault(),"transform: rotate(180deg);"==e.querySelector("img").getAttribute("style")?(r[t].style.display="flex",e.querySelector("img").style="transform: rotate(0)"):(r[t].style.display="none",e.querySelector("img").style="transform: rotate(180deg)")}))):t>3&&(e.querySelector("img").style="transform: rotate(180deg)",e.addEventListener("click",(l=>{l.preventDefault(),"transform: rotate(180deg);"==e.querySelector("img").getAttribute("style")?(r[t-1].style.display="flex",e.querySelector("img").style="transform: rotate(0)"):(r[t-1].style.display="none",e.querySelector("img").style="transform: rotate(180deg)")})))}))}))};window.onchange=e,e()})(),(()=>{const e=document.querySelector(".thanks"),t=document.createElement("div"),l=document.querySelectorAll(".form"),r=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;window.addEventListener("DOMContentLoaded",(()=>{[].forEach.call(document.querySelectorAll('[type="tel"]'),(e=>{let t;function l(e){e.keyCode&&(t=e.keyCode),this.selectionStart<3&&e.preventDefault();let l="+7 (___) ___-__-__",r=0,o=l.replace(/\D/g,""),a=this.value.replace(/\D/g,""),n=l.replace(/[_\d]/g,(e=>r<a.length?a.charAt(r++)||o.charAt(r):e));r=n.indexOf("_"),-1!=r&&(r<5&&(r=3),n=n.slice(0,r));let s=l.substr(0,this.value.length).replace(/_+/g,(e=>"\\d{1,"+e.length+"}")).replace(/[+()]/g,"\\$&");s=new RegExp("^"+s+"$"),(!s.test(this.value)||this.value.length<5||t>47&&t<58)&&(this.value=n),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",l,!1),e.addEventListener("focus",l,!1),e.addEventListener("blur",l,!1),e.addEventListener("keydown",l,!1)}))})),l.forEach(((l,o)=>{l.querySelectorAll('input[name="name"]').forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^а-яё\s]+/gi,"")}))})),l.addEventListener("submit",(async function(r){r.preventDefault();let o=a(l),n=new FormData(l);if(0===o){t.classList.add("modal__wait"),t.textContent="Загрузка...",l.append(t);let r=await fetch("../files/sendmail.php",{method:"POST",body:n,headers:{"Content-Type":"application/json"}});if(r.ok){let o=await r.json();alert(o.message),l.reset(),t.textContent="",e.classList.toggle("active")}else alert("ошибка"),t.textContent=""}else alert("Корректно заполните форму")}));const a=function(e){let t=0,l=e.querySelectorAll("._req");for(let e=0;e<l.length;e++){const o=l[e];s(o),(""===o.value||"email"===o.getAttribute("type")&&0==r.test(o.value))&&(n(o),t++)}return t};function n(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function s(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}}))})(),(()=>{const e=document.querySelectorAll('[href*="#"]');for(let t of e)t.addEventListener("click",(e=>{if(e.preventDefault(),""!=t.getAttribute("href").substr(1)&&"#"==t.getAttribute("href").slice(0,1)){const e=t.getAttribute("href").substr(1);document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start"})}}))})()})();